<!DOCTYPE html>
<html>
<head>
    <title>Cart</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<header><h1>Your Cart</h1></header>

<nav>
    <a href="/">Home</a>
    <a href="/products">Products</a>
    <a href="/cart">Cart</a>
    <a href="/orders">Orders</a>
</nav>

{% if cart_items %}
<section class="products">

{% for item in cart_items %}
<div class="card">
    <h3>{{ item.name }}</h3>

    <div style="display:flex;justify-content:center;gap:10px;">
        <button onclick="updateQty({{ item.id }}, 'decrease')">−</button>
        <strong>{{ item.qty }}</strong>
        <button onclick="updateQty({{ item.id }}, 'increase')">+</button>
    </div>

    <p>Subtotal: ₹{{ item.subtotal }}</p>
</div>
{% endfor %}

<div class="card">
    <h2>Total: ₹{{ total }}</h2>

    <form action="/create-checkout-session" method="POST">
        <button>Pay with Card (Demo)</button>
    </form>

    <a href="https://wa.me/91XXXXXXXXXX">
        <button>Order on WhatsApp</button>
    </a>

    <a href="/clear-cart">
        <button>Clear Cart</button>
    </a>
</div>

</section>
{% else %}
<p style="text-align:center;">Cart is empty</p>
{% endif %}

<script>
function updateQty(id, action) {
    fetch(`/api/update-cart/${id}/${action}`, { method: "POST" })
    .then(() => location.reload());
}
</script>

</body>
</html>
